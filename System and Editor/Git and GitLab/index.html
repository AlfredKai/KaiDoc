<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Git & GitLab Learning - KaiDocs</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Git &amp; GitLab Learning", url: "#_top", children: [
              {title: "Git", url: "#git" },
              {title: "GitLab", url: "#gitlab" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Jenkins/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Jenkins/" class="btn btn-xs btn-link">
        Jenkins
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../Docker/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../Docker/" class="btn btn-xs btn-link">
        Docker
      </a>
    </div>
    
  </div>

    

    <h1 id="git-gitlab-learning">Git &amp; GitLab Learning</h1>
<h2 id="git">Git</h2>
<h3 id="how-to-write-a-good-commit-message">How to write a good commit message</h3>
<p>A properly formed Git commit subject line should always be able to complete the following sentence: if applied, this commit will your subject line here. For example :</p>
<ul>
<li>if applied, this commit will Delete unnecessary files</li>
<li>if applied, this commit will Add grep option</li>
<li>if applied, this commit will Fix error when protocol is missing</li>
</ul>
<p>It will not work for bad commit messages :</p>
<ul>
<li>if applied, this commit will contact page</li>
<li>if applied, this commit will list of online users, some other changes because of server</li>
</ul>
<h3 id="git-flow">Git flow</h3>
<p><a href="https://nvie.com/posts/a-successful-git-branching-model/">https://nvie.com/posts/a-successful-git-branching-model/</a><br />
<a href="https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow">https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow</a></p>
<h3 id="tags">Tags</h3>
<p>選一個 tag</p>
<ul>
<li>[FEAT] 新增功能的變動</li>
<li>[BUGFIX] 修 bug 相關的變動</li>
<li>[REFACTOR] 功能不變但程式變的變動</li>
<li>[TASK] 其他雜項變動</li>
<li>[CHORE] 跟 code 無關的變動 例如 readme</li>
<li>[STYLE] 改 coding style 相關的變動 例如縮排 命名</li>
</ul>
<h3 id="pull-rebase">pull —rebase</h3>
<p>不要 merge remote to local</p>
<h3 id="commit-message">Commit message</h3>
<p><a href="https://blog.louie.lu/2017/03/21/%E5%A6%82%E4%BD%95%E5%AF%AB%E4%B8%80%E5%80%8B-git-commit-message/">https://blog.louie.lu/2017/03/21/%E5%A6%82%E4%BD%95%E5%AF%AB%E4%B8%80%E5%80%8B-git-commit-message/</a>
<a href="https://gist.github.com/adeekshith/cd4c95a064977cdc6c50">https://gist.github.com/adeekshith/cd4c95a064977cdc6c50</a></p>
<h3 id="gitmoji">Gitmoji</h3>
<p><a href="https://gitmoji.carloscuesta.me/">https://gitmoji.carloscuesta.me/</a></p>
<h3 id="resource">Resource</h3>
<p><a href="https://learngitbranching.js.org/">Online Turtorial</a><br />
<a href="https://git-scm.com/book/zh-tw/v1">Git book</a><br />
<a href="https://github.com/doggy8088/Learn-Git-in-30-days">30 天精通 Git 版本控管</a></p>
<h3 id="git-command">Git Command</h3>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>git clone [repo]</td>
<td></td>
</tr>
<tr>
<td>git status</td>
<td></td>
</tr>
<tr>
<td>git remote -v</td>
<td></td>
</tr>
<tr>
<td>git commit -m [comment msg]</td>
<td></td>
</tr>
<tr>
<td>git push origin master</td>
<td></td>
</tr>
<tr>
<td>git checkout origin develop</td>
<td></td>
</tr>
</tbody>
</table>
<pre><code class="bash">git blame 檔案名稱
</code></pre>

<p>這個指令會列出這個檔案裡的每一行是誰在什麼時間、哪一次 commit 寫進去的，想賴都賴不掉。</p>
<h3 id="how-do-you-force-a-merge-with-git">How do you force a merge with Git?</h3>
<p><a href="https://www.quora.com/How-do-you-force-a-merge-with-Git">ref</a></p>
<h4 id="i-dont-care-if-there-is-any-other-conflict-my-branch-a-will-win-always">I don’t care if there is any other conflict. My branch A will win. Always</h4>
<pre><code class="bash">git checkout A
git merge -s ours master
git checkout master
git merge A
</code></pre>

<h4 id="it-is-just-the-file-b-which-should-win-all-others-should-be-merged-as-normal">It is just the File B which should win. All others should be merged as normal</h4>
<pre><code class="bash">git checkout A
cp B ../outsideRepository
git checkout master
git merge --no-commit --no-ff A
cp ../outsideRepsitory/B ./
# Resolve other conflicts...
git commit -m &quot;Your merge message :-)&quot;
</code></pre>

<h4 id="master-branch-a-is-the-new-master">Master branch? A is the new master.</h4>
<pre><code class="bash">git checkout A
git branch -D master #It forces to delete the master branch
git branch master #Creates a new master on current head
git checkout master
git push origin master --force
</code></pre>

<h3 id="git-attributes">Git Attributes</h3>
<p>使用<code>.gitattributes</code>可以新增一些特殊功能，其中一項為設定<code>合併策略</code>，範例：</p>
<pre><code class="git">slackbot_settings.py merge=ours
</code></pre>

<p>使用<code>merge=ours</code>請注意必須在 config 開器此功能，使用下面指令查看 config</p>
<pre><code class="git">git config --global -l
</code></pre>

<p>如果沒有</p>
<pre><code class="git">merge.ours.driver=true
</code></pre>

<p>請用以下指令新增：</p>
<pre><code class="git">git config --global merge.ours.driver true
</code></pre>

<h2 id="gitlab">GitLab</h2>
<p><a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/files/gitlab-config-template/gitlab.rb.template">https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/files/gitlab-config-template/gitlab.rb.template</a>
<a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/gitlab.yml.md">https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/gitlab.yml.md</a>
<a href="https://docs.gitlab.com/ee/raketasks/backup_restore.html">https://docs.gitlab.com/ee/raketasks/backup_restore.html</a></p>
<h3 id="changing-gitlabyml">Changing gitlab.yml</h3>
<p><a href="https://docs.gitlab.com/omnibus/settings/gitlab.yml.html">https://docs.gitlab.com/omnibus/settings/gitlab.yml.html</a></p>
<h3 id="issue-board">issue board</h3>
<h3 id="cicd">CI/CD</h3>
<p><a href="https://about.gitlab.com/2018/01/22/a-beginners-guide-to-continuous-integration/?utm_medium=social&amp;utm_source=twitter">A beginner's guide to continuous integration</a></p>
<p><a href="https://docs.gitlab.com/ee/ci/yaml/README.html#includetemplate">GitLab CI/CD Pipeline Configuration Reference</a></p>
<h3 id="ssh">SSH</h3>
<h3 id="backup-and-restore">Backup and Restore</h3>
<p><a href="https://docs.gitlab.com/ee/raketasks/backup_restore.html">https://docs.gitlab.com/ee/raketasks/backup_restore.html</a></p>
<p>將備份丟到 dropbox，記得</p>
<pre><code class="bash">cd /etc/gitlab
sudo vim gitlab.rb
# gitlab_rails['manage_backup_path'] = false
# gitlab_rails['backup_path'] = &quot;/home/kai/Dropbox/gitlab_backup&quot;
# gitlab_rails['backup_archive_permissions'] = 0777
gitlab-ctl reconfigure
sudo crontab -e
24 * * * * gitlab-rake gitlab:backup:create
</code></pre>

<p>不幸版本不合你需要：</p>
<p><a href="https://docs.gitlab.com/omnibus/update/README.html#downgrading">Downgrade</a><br />
<a href="https://packages.gitlab.com/gitlab/">特定版本</a></p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../Jenkins/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../Jenkins/" class="btn btn-xs btn-link">
        Jenkins
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../Docker/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../Docker/" class="btn btn-xs btn-link">
        Docker
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>
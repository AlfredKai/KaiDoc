<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Advanced Database Design For a Relational DB w/ MySQL - KaiDocs</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-3.2.1.min.js"></script>
    <script src="../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Advanced Database Design For a Relational DB w/ MySQL", url: "#_top", children: [
              {title: "Database Design Essentials", url: "#database-design-essentials" },
              {title: "Common Database Design Mistakes", url: "#common-database-design-mistakes" },
              {title: "Database Purpose", url: "#database-purpose" },
              {title: "Best Practices", url: "#best-practices" },
          ]},
        ];

    </script>
    <script src="../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../MySQL%20%E8%B6%85%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../MySQL%20%E8%B6%85%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80/" class="btn btn-xs btn-link">
        MySQL 超新手入門
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../" class="btn btn-xs btn-link">
        Database
      </a>
    </div>
    
  </div>

    

    <h1 id="advanced-database-design-for-a-relational-db-w-mysql">Advanced Database Design For a Relational DB w/ MySQL</h1>
<ul>
<li>naming conventions is important because you don't want to change that naming convention after you have a few people created already because then it's pure mess</li>
</ul>
<h2 id="database-design-essentials">Database Design Essentials</h2>
<ol>
<li><strong>Understand the database's purpose</strong> (OLTP/OLAP?)</li>
<li><strong>Get the right tool</strong> (MySQL Workbench)</li>
<li><strong>Gather the requirements for the database</strong> (biz, tech, ops)</li>
<li><strong>Standardize the naming convention</strong></li>
<li><strong>Enforce relationships</strong> (data integrity)</li>
<li><strong>Use the appropriate data types</strong> (use a variety of data types)</li>
<li><strong>Be conscientious</strong> when modeling the data (do what's right!)</li>
<li><strong>Include indexes</strong> when modeling</li>
<li><strong>Document your work</strong> &amp; keep track of changes (GitHub repo)</li>
</ol>
<h2 id="common-database-design-mistakes">Common Database Design Mistakes</h2>
<ol>
<li>Poor design/planning</li>
<li>Ignoring normalization</li>
<li>Poor naming standards</li>
<li>Lack of documentation</li>
<li>One table to hold all domain values</li>
<li>Using identity columns are your ONLY key</li>
<li>Not using SQL facilities to protect data integrity</li>
<li>Trying to build generic objects (common reference table)</li>
<li>Lack of testing</li>
<li>Poor deployment workflow (lack of environments)</li>
</ol>
<h2 id="database-purpose">Database Purpose</h2>
<ul>
<li>what is the purpose of the database? transactional(OLTP) or anlytical database(OLAP)?</li>
<li>OLTP: optimize for the speed of transactions</li>
<li>OLAP: optimize for the speed of aggregate queries</li>
<li>The OLTP disk access tends to be random disk access. (thus may get benefit from storage grids). On the other hand, OLAP operations tend to be long and resource intensive thus more contention risk. Furthermore, the OLAP disk access tends to be sequential. To avoid OLAP blocking the OLTP it's advisable to <strong>separate OLTP &amp; OLAP processing</strong>, i.e. using a dedicated server only for OLAP operations or to defer OLAP operations to nightly/less intensive period.</li>
</ul>
<h2 id="best-practices">Best Practices</h2>
<h3 id="naming-convetions">Naming Convetions</h3>
<ul>
<li>Michal: I think that the scrum is a little enemy for database design, because in database design things should not really change so fast because it's very cumbersome.</li>
<li>table or column names always always in singular, so you don't spend time thinking of if it is user or users.</li>
</ul>
<h3 id="which-columns-to-index">Which Columns to Index</h3>
<p>How to choose which columns for index:</p>
<ul>
<li>The primary and foreign <strong>keys</strong> columns are candidates for index.</li>
<li>Choose columns which <strong>not frequently updated</strong>, since index will degrade performance of DML (update, insert, delete) operations (due to index table maintenance).</li>
<li>Choose columns which are used in <strong>order by / group by</strong> clauses since indexes will order the data to make these statements faster.</li>
<li>If you use <strong>range</strong> in where clause (e.g. between) use this range columns when making clustered index.</li>
<li>Use <strong>high selective</strong> / high cardinality columns.</li>
<li><strong>Order is matter</strong> when creating composite indexes: create highly selective indexes by using the most restrictive columns first.</li>
</ul>
<p>Avoid over indexing:</p>
<ul>
<li>Remove <strong>unused index</strong></li>
<li>For <strong>small table</strong> your don't need index</li>
<li>If more than 10 percent of table must be examined you might better use full table scan instead of index</li>
</ul>
<h3 id="when-to-use-a-view">When to Use a View</h3>
<p>Consider to use views in these cases:</p>
<ul>
<li>To limit columns/tables that a user can see due to <strong>security/privacy</strong> concerns. You might restrict the view query to read only and limit the rows return.</li>
<li>To <strong>hide complex join</strong>, to represent a combination of tables.</li>
<li>To give <strong>meaningful names</strong>.</li>
<li>To <strong>absorb changes</strong>. When the data model in database changes, the application can still use the same query if we modify the view definition.</li>
</ul>
<h3 id="use-artifical-keys">Use Artifical Keys</h3>
<ul>
<li>artifical key is a little bit better than natural since you don't need to worry about the number could be changed</li>
</ul>
<h3 id="use-integrity-checks-as-much-as-you-can">Use Integrity Checks As Much As You Can</h3>
<p><strong>Domain tables (reference tables)</strong> are effective for enforcing integrity. They work well when there are many values to be checked against, or the values to be checked are frequently changing.</p>
<p>A common misconception is to think that the <strong>application</strong> should check integrity. The issue here is that a central database might be accessed by many applications. Also, you generally want to protect the data where it is: in the database.</p>
<p>If the possible values are limited or in a range, then a check constraint may be preferable. Let’s say that messages are defined as either Incoming or Outgoing, in which case there is no need for a foreign key. But, for something like valid currencies, while these may seem static, they actually change from time-to-time. Countries join a currency union and currencies change.</p>
<p>Applications should also perform integrity checks, but <strong>don’t rely only on the application for integrity checking.</strong> Defining integrity rules on the database ensures that those rules will never be violated. In this way, the data satisfies the defined integrity rules at all times.</p>
<h3 id="dont-have-all-columns-nullable">Don't Have All Columns NULLable</h3>
<p>Within the database columns definitions good data domains, ranges and values should be analyzed, evaluated and prototyped for the business application.</p>
<p>Having good default values, a limited scope of values and always a value are best for performance and application logic. NULLable columns are only good when data is unknown or doesn’t have a value yet.</p>
<p>Someone’s death date data is the classic example of a NULLable column because it is unknown unless they are already dead. Make sure your database design represents data that is known and only uses a minimum of NULLable columns.</p>
<h3 id="make-sure-you-understand-database-normalization">Make Sure You Understand Database Normalization</h3>
<p>Your OLTP database should be well normalized - using at least third normal form and maybe even up to fifth normal form is the starting critical evaluation criteria.</p>
<p>The reason the database design normalization processes have been endorsed forever is because they are effective for identifying all the insert, update and delete data anomalies and support the integrity of the application data.</p>

  <br>
    

    
    
      
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../MySQL%20%E8%B6%85%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../MySQL%20%E8%B6%85%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80/" class="btn btn-xs btn-link">
        MySQL 超新手入門
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../" class="btn btn-xs btn-link">
        Database
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>